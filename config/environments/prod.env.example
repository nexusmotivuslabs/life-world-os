# Production Environment Variables
# Copy to .env.prod in project root for Docker Compose
# NEVER commit this file with real values - use secrets management (AWS Secrets Manager, Azure Key Vault, HashiCorp Vault)
# All environments use the same variable structure - only values differ

# =============================================================================
# ENVIRONMENT IDENTIFICATION
# =============================================================================
NODE_ENV=production
ENVIRONMENT=prod

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Use managed database connection string from cloud provider (RDS, Cloud SQL, Azure Database)
PROD_DB_HOST=your-prod-db-host.rds.amazonaws.com
PROD_DB_PORT=5432
PROD_DB_USER=lifeworld_prod
PROD_DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS
PROD_DB_NAME=lifeworld_prod
PROD_DATABASE_URL=postgresql://lifeworld_prod:CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS@your-prod-db-host.rds.amazonaws.com:5432/lifeworld_prod
PROD_DB_CONTAINER_NAME=life-db-prod

# Database Connection Pooling (Prisma/PostgreSQL)
PROD_DB_POOL_MIN=2
PROD_DB_POOL_MAX=10
PROD_DB_POOL_IDLE_TIMEOUT_MS=30000
PROD_DB_POOL_CONNECTION_TIMEOUT_MS=20000

# Database Performance Tuning (PostgreSQL)
PROD_DB_MAX_CONNECTIONS=100
PROD_DB_SHARED_BUFFERS=256MB
PROD_DB_EFFECTIVE_CACHE_SIZE=1GB
PROD_DB_MAINTENANCE_WORK_MEM=64MB
PROD_DB_CHECKPOINT_COMPLETION_TARGET=0.9
PROD_DB_WAL_BUFFERS=16MB
PROD_DB_DEFAULT_STATISTICS_TARGET=100
PROD_DB_RANDOM_PAGE_COST=1.1
PROD_DB_EFFECTIVE_IO_CONCURRENCY=200
PROD_DB_WORK_MEM=4MB
PROD_DB_MIN_WAL_SIZE=1GB
PROD_DB_MAX_WAL_SIZE=4GB

# Database Backup Configuration
PROD_DB_BACKUP_ENABLED=true
PROD_DB_BACKUP_INTERVAL=3600
PROD_DB_BACKUP_PATH=/var/backups/postgres
PROD_DB_DATA_PATH=/var/lib/postgresql/data

# Database Resource Limits
PROD_DB_CPU_LIMIT=2.0
PROD_DB_MEMORY_LIMIT=2G
PROD_DB_CPU_RESERVATION=0.5
PROD_DB_MEMORY_RESERVATION=512M

# =============================================================================
# BACKEND CONFIGURATION
# =============================================================================
PROD_BACKEND_PORT=3000
PROD_API_URL=https://api.yourdomain.com
PROD_BACKEND_CONTAINER_NAME=life-world-os-backend-prod
PROD_BACKEND_IMAGE_NAME=life-world-os-backend-prod

# Backend Resource Limits
PROD_BACKEND_CPU_LIMIT=1.0
PROD_BACKEND_MEMORY_LIMIT=1G
PROD_BACKEND_CPU_RESERVATION=0.25
PROD_BACKEND_MEMORY_RESERVATION=256M

# Request/Response Configuration
PROD_MAX_REQUEST_SIZE=10mb
PROD_REQUEST_TIMEOUT_MS=30000
PROD_KEEP_ALIVE_TIMEOUT_MS=65000

# Graceful Shutdown
PROD_GRACEFUL_SHUTDOWN_TIMEOUT_MS=30000

# SSL/TLS and Proxy Configuration
PROD_TRUST_PROXY=true
PROD_PROXY_PROTOCOL=false

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================
PROD_FRONTEND_PORT=80
PROD_FRONTEND_URL=https://yourdomain.com
PROD_FRONTEND_CONTAINER_NAME=life-world-os-frontend-prod
PROD_FRONTEND_IMAGE_NAME=life-world-os-frontend-prod
VITE_API_URL=https://api.yourdomain.com

# Frontend Resource Limits
PROD_FRONTEND_CPU_LIMIT=0.5
PROD_FRONTEND_MEMORY_LIMIT=256M
PROD_FRONTEND_CPU_RESERVATION=0.1
PROD_FRONTEND_MEMORY_RESERVATION=128M

# Security Headers
PROD_SECURITY_HEADERS_ENABLED=true
PROD_CSP_ENABLED=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# CORS Configuration
PROD_CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# Rate Limiting
PROD_RATE_LIMIT_ENABLED=true
PROD_RATE_LIMIT_WINDOW_MS=900000
PROD_RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# AUTHENTICATION
# =============================================================================
# JWT Secret: MUST be at least 32 characters, use strong random string
# Generate: openssl rand -base64 32
PROD_JWT_SECRET=CHANGE_ME_PRODUCTION_JWT_SECRET_MIN_32_CHARS_USE_SECRETS_MANAGER
PROD_JWT_EXPIRES_IN=7d
JWT_SECRET=CHANGE_ME_PRODUCTION_JWT_SECRET_MIN_32_CHARS_USE_SECRETS_MANAGER
JWT_EXPIRES_IN=7d

# =============================================================================
# AI SERVICES
# =============================================================================
# Ollama Configuration (for local LLM - typically not used in production)
OLLAMA_URL=
OLLAMA_MODEL=llama3.2
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# OpenAI Configuration (recommended for production)
OPENAI_API_KEY=

# Groq Configuration (fast and cost-effective)
GROQ_API_KEY=

# xAI/Grok Configuration
XAI_API_KEY=
GROK_MODEL=grok-beta

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================
# Logging Configuration
PROD_LOG_LEVEL=warn
LOG_LEVEL=warn

# Sentry Error Tracking (recommended)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Datadog APM (optional)
DATADOG_API_KEY=
DATADOG_SERVICE=life-world-os-backend
DATADOG_ENV=production

# New Relic APM (optional)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=life-world-os-backend
NEW_RELIC_ENABLED=true

# Application Insights (Azure - optional)
APPINSIGHTS_INSTRUMENTATIONKEY=

# CloudWatch (AWS - optional)
AWS_CLOUDWATCH_LOG_GROUP=life-world-os-prod
AWS_CLOUDWATCH_LOG_STREAM=backend
AWS_REGION=us-east-1

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================
# Google Places API (for Travel System - expensive, use LLM instead)
GOOGLE_PLACES_API_KEY=

# Email Service (for notifications)
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=CHANGE_ME
SMTP_FROM=noreply@yourdomain.com

# SMS Service (Twilio, AWS SNS, etc.)
SMS_PROVIDER=
SMS_API_KEY=
SMS_FROM_NUMBER=

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_MAINTENANCE_MODE=false
FEATURE_ANALYTICS_ENABLED=true
FEATURE_ERROR_TRACKING_ENABLED=true

# =============================================================================
# BUILD METADATA (Automatically set by CI/CD)
# =============================================================================
BUILD_VERSION=1.0.0
BUILD_COMMIT=unknown
BUILD_BRANCH=main
BUILD_TIMESTAMP=
