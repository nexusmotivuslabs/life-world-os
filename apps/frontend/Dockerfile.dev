# Development Dockerfile for Frontend
# Supports hot reload with volume mounts

FROM node:20-alpine

# Update npm to latest version (optional but recommended)
RUN npm install -g npm@latest

RUN apk add --no-cache libc6-compat

WORKDIR /app

# Install dependencies
COPY package.json package-lock.json* ./
RUN if [ -f package-lock.json ]; then npm ci; else npm install; fi

# Copy source (will be mounted as volume for hot reload)
COPY . .

# Expose port
EXPOSE 5173

# Build args for environment variables
ARG VITE_API_URL=http://localhost:3001
ENV VITE_API_URL=$VITE_API_URL

# Run dev server with hot reload
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "5173"]


